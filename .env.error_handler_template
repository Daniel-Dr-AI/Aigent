# ==========================================
# Aigent Global Error Handler Configuration
# ==========================================
# Copy relevant sections to your main .env file
# Only configure the integrations you actually use

# ==========================================
# Core Settings
# ==========================================

# Enable/disable sensitive data redaction (HIPAA, GDPR, PCI-DSS compliance)
# Values: true | false
# Default: true (recommended for production)
REDACT_SENSITIVE_DATA=true

# Environment identifier (appears in error logs)
# Values: development | staging | production | custom
# Default: production
DEPLOYMENT_ENV=production

# ==========================================
# Notification Destinations (OPTIONAL)
# ==========================================
# Configure ANY or ALL of these based on your needs

# --- Webhook Notifications ---
# Supports: Slack, Discord, Microsoft Teams, custom webhooks
# Get webhook URL from your service's integration settings
# Leave empty to disable webhook notifications
NOTIFICATION_WEBHOOK_URL=

# Examples:
# Slack: https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXX
# Discord: https://discord.com/api/webhooks/123456789/abcdefghijklmnop
# Teams: https://outlook.office.com/webhook/...


# --- Email Notifications ---
# Send error notifications via email
# Requires SMTP credentials configured in n8n
# Leave empty to disable email notifications
ERROR_EMAIL_ADDRESS=

# Email sender address (optional, defaults to noreply@aigent.app)
ERROR_FROM_EMAIL=noreply@aigent.app

# Examples:
# ERROR_EMAIL_ADDRESS=devops@yourcompany.com
# ERROR_EMAIL_ADDRESS=oncall@yourcompany.com,team@yourcompany.com


# ==========================================
# Logging Destinations (OPTIONAL)
# ==========================================

# Master switch for error logging
# Set to 'true' to enable logging to configured destinations
# Set to 'false' to disable all logging
ENABLE_ERROR_LOGGING=true

# --- Google Sheets Logging ---
# Log errors to a Google Sheet for analysis and tracking
# Requires Google Sheets OAuth2 credentials in n8n
# Get Sheet ID from URL: https://docs.google.com/spreadsheets/d/SHEET_ID/edit
ERROR_LOG_SHEET_ID=

# Sheet tab name (default: ErrorLog)
# Create a tab with headers: trace_id, timestamp, workflow_name, workflow_id,
# execution_id, error_message, error_node, error_node_type, deployment_env, redacted
ERROR_LOG_TAB=ErrorLog


# --- Database Logging ---
# Log errors to PostgreSQL, MySQL, MongoDB, etc.
# Requires database credentials configured in n8n
# Connection string format varies by database type
ERROR_DB_CONNECTION=

# Database table name for error logs
ERROR_DB_TABLE=error_logs

# Examples:
# PostgreSQL: postgresql://user:password@localhost:5432/aigent
# MySQL: mysql://user:password@localhost:3306/aigent
# MongoDB: mongodb://user:password@localhost:27017/aigent


# --- File System Logging ---
# Write errors to a local log file
# Useful for Docker volume mounts or shared filesystems
# Ensure n8n has write permissions to this path
ERROR_LOG_PATH=/var/log/aigent/errors.log


# ==========================================
# Monitoring & Observability (OPTIONAL)
# ==========================================

# --- Monitoring API Integration ---
# Send errors to external monitoring/observability platforms
# Supports: Datadog, Sentry, New Relic, custom APIs
MONITORING_API_URL=

# API authentication key/token
MONITORING_API_KEY=

# Examples:
# Datadog Events API:
# MONITORING_API_URL=https://api.datadoghq.com/api/v1/events
# MONITORING_API_KEY=your_datadog_api_key
#
# Sentry:
# MONITORING_API_URL=https://sentry.io/api/1234567/store/
# MONITORING_API_KEY=your_sentry_dsn_key
#
# New Relic Insights:
# MONITORING_API_URL=https://insights-collector.newrelic.com/v1/accounts/YOUR_ACCOUNT/events
# MONITORING_API_KEY=your_insert_key


# ==========================================
# Example Configurations
# ==========================================

# --- Minimal (Slack only) ---
# REDACT_SENSITIVE_DATA=true
# NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK
# ENABLE_ERROR_LOGGING=false

# --- Standard (Slack + Google Sheets) ---
# REDACT_SENSITIVE_DATA=true
# NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK
# ENABLE_ERROR_LOGGING=true
# ERROR_LOG_SHEET_ID=1abc123def456ghi789

# --- Enterprise (Full Stack) ---
# REDACT_SENSITIVE_DATA=true
# NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK
# ERROR_EMAIL_ADDRESS=oncall@yourcompany.com
# ENABLE_ERROR_LOGGING=true
# ERROR_LOG_SHEET_ID=1abc123def456ghi789
# MONITORING_API_URL=https://api.datadoghq.com/api/v1/events
# MONITORING_API_KEY=your_datadog_api_key

# --- Development (No Redaction, Verbose) ---
# REDACT_SENSITIVE_DATA=false
# NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/DEV/WEBHOOK
# ENABLE_ERROR_LOGGING=true
# ERROR_LOG_SHEET_ID=dev_sheet_id
# DEPLOYMENT_ENV=development

# ==========================================
# Security Notes
# ==========================================
#
# 1. Never commit this file with real values to version control
# 2. Use strong, unique API keys for all integrations
# 3. Enable REDACT_SENSITIVE_DATA=true in production
# 4. Restrict access to error logs (contains debugging info)
# 5. Rotate webhook URLs periodically
# 6. Use read-only database credentials if possible
# 7. Monitor for webhook abuse/spam
#
# ==========================================
