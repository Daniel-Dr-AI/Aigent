# ============================================================================
# Aigent Module 01 - Enhanced Intake & Lead Capture
# Environment Variables Template
# Version: 1.1.0-enhanced
# ============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to your n8n environment configuration
# 2. Replace all placeholder values with your actual credentials/settings
# 3. NEVER commit the actual .env file to version control
# 4. For Docker: Add to docker-compose.yml under 'environment' section
# 5. For n8n Cloud: Add via Settings â†’ Environments
# 6. For Self-hosted: Export to shell or use .env file with docker-compose
#
# ============================================================================

# ----------------------------------------------------------------------------
# CORE WEBHOOK CONFIGURATION
# ----------------------------------------------------------------------------

# Webhook unique identifier (optional - n8n auto-generates if not set)
WEBHOOK_ID=intake-lead-capture-v1

# CORS allowed origins (comma-separated)
# Development: Use '*' to allow all origins
# Production: Specify exact domains for security
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# Example for development:
# ALLOWED_ORIGINS=*

# ----------------------------------------------------------------------------
# CRM INTEGRATION (HubSpot Default)
# ----------------------------------------------------------------------------

# HubSpot Credential ID (from n8n Credentials page)
HUBSPOT_CREDENTIAL_ID=1

# HubSpot Credential Name (must match name in n8n)
HUBSPOT_CREDENTIAL_NAME=HubSpot Production Account

# CRM Retry Configuration (NEW in v1.1)
# Number of retry attempts for CRM API failures
CRM_RETRY_COUNT=3

# Delay between retry attempts in milliseconds
CRM_RETRY_DELAY_MS=1000

# ----------------------------------------------------------------------------
# ALTERNATE CRM EXAMPLES (Comment out HubSpot, uncomment one below)
# ----------------------------------------------------------------------------

# Salesforce Configuration
# SALESFORCE_CREDENTIAL_ID=2
# SALESFORCE_CREDENTIAL_NAME=Salesforce Production

# Zoho CRM Configuration
# ZOHO_CREDENTIAL_ID=3
# ZOHO_CREDENTIAL_NAME=Zoho CRM Account

# Custom API Configuration (requires HTTP Request node modification)
# CUSTOM_CRM_API_URL=https://your-crm.com/api/v1/contacts
# CUSTOM_CRM_API_KEY=your-api-key-here

# ----------------------------------------------------------------------------
# NOTIFICATION CONFIGURATION
# ----------------------------------------------------------------------------

# Primary Notification Webhook URL
# Slack: https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# Teams: https://outlook.office.com/webhook/YOUR-WEBHOOK-URL
# Discord: https://discord.com/api/webhooks/YOUR/WEBHOOK
NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/services/YOUR-WORKSPACE-ID/YOUR-CHANNEL-ID/YOUR-SECRET-TOKEN

# Notification Channel/Room (platform-specific)
# Slack: #channel-name
# Teams: Channel name or connector name
NOTIFICATION_CHANNEL=#leads

# Notification Authentication Credential (if required)
NOTIFICATION_AUTH_CREDENTIAL_ID=4
NOTIFICATION_AUTH_CREDENTIAL_NAME=Slack Webhook Auth

# Notification Timeout in milliseconds (NEW in v1.1)
# Prevents slow notification services from blocking workflow
NOTIFICATION_TIMEOUT_MS=5000

# ----------------------------------------------------------------------------
# ERROR NOTIFICATION CONFIGURATION (NEW in v1.1)
# ----------------------------------------------------------------------------

# Separate webhook for error alerts (recommended for ops/dev team)
# Leave empty to disable error notifications
ERROR_NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/services/YOUR-ERROR-WORKSPACE/YOUR-ERROR-CHANNEL/YOUR-ERROR-TOKEN

# Error notification channel (separate from general notifications)
ERROR_NOTIFICATION_CHANNEL=#errors

# Error notification authentication
ERROR_NOTIFICATION_AUTH_CREDENTIAL_ID=5
ERROR_NOTIFICATION_AUTH_CREDENTIAL_NAME=Slack Error Webhook Auth

# Support email displayed in error responses
SUPPORT_EMAIL=support@yourdomain.com

# ----------------------------------------------------------------------------
# DATA STORE CONFIGURATION (Google Sheets Default)
# ----------------------------------------------------------------------------

# Google Sheet ID (from sheet URL)
# Example URL: https://docs.google.com/spreadsheets/d/SHEET_ID_HERE/edit
GOOGLE_SHEET_ID=1AbCdEfGhIjKlMnOpQrStUvWxYz1234567890

# Google Sheet Tab Name
GOOGLE_SHEET_TAB=Leads

# Google Sheets Credential
GOOGLE_SHEETS_CREDENTIAL_ID=6
GOOGLE_SHEETS_CREDENTIAL_NAME=Google Sheets OAuth Account

# Data Store Retry Configuration (NEW in v1.1)
DATASTORE_RETRY_COUNT=2
DATASTORE_RETRY_DELAY_MS=2000

# ----------------------------------------------------------------------------
# ALTERNATE DATA STORE EXAMPLES
# ----------------------------------------------------------------------------

# Airtable Configuration
# AIRTABLE_CREDENTIAL_ID=7
# AIRTABLE_BASE_ID=appXXXXXXXXXXXXXX
# AIRTABLE_TABLE_NAME=Leads

# Notion Configuration
# NOTION_CREDENTIAL_ID=8
# NOTION_DATABASE_ID=your-database-id

# PostgreSQL Database
# POSTGRES_CREDENTIAL_ID=9
# POSTGRES_TABLE=patient_leads
# POSTGRES_SCHEMA=public

# ----------------------------------------------------------------------------
# RATE LIMITING (NEW in v1.1)
# ----------------------------------------------------------------------------

# Enable rate limiting (true/false)
# Protects against spam and abuse
RATE_LIMIT_ENABLED=false

# Maximum requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# ----------------------------------------------------------------------------
# OBSERVABILITY & MONITORING (NEW in v1.1)
# ----------------------------------------------------------------------------

# Enable debug mode (logs additional details)
DEBUG_MODE=false

# Save execution data for all runs (for analysis)
# Options: all, none, onlyOnError
SAVE_EXECUTION_DATA=all

# ----------------------------------------------------------------------------
# GLOBAL ERROR HANDLING
# ----------------------------------------------------------------------------

# Error workflow ID (optional - for centralized error handling)
# Leave empty to use inline error handling
ERROR_WORKFLOW_ID=

# ----------------------------------------------------------------------------
# N8N INSTANCE CONFIGURATION
# ----------------------------------------------------------------------------

# n8n instance identifier (for multi-instance deployments)
N8N_INSTANCE_ID=production-001

# Timezone for timestamp operations
TZ=America/New_York

# ----------------------------------------------------------------------------
# SECURITY & COMPLIANCE
# ----------------------------------------------------------------------------

# HIPAA mode (enables additional security checks)
# Note: Module 01 is PHI-safe by design (no medical data collected)
HIPAA_MODE=false

# Data retention period in days
# HIPAA compliance: 7 years = 2555 days
DATA_RETENTION_DAYS=2555

# Enable audit logging
AUDIT_LOG_ENABLED=true

# ----------------------------------------------------------------------------
# PERFORMANCE TUNING
# ----------------------------------------------------------------------------

# Workflow execution timeout (milliseconds)
# Default: 120000 (2 minutes)
WORKFLOW_TIMEOUT_MS=120000

# Maximum parallel executions (for high-volume scenarios)
MAX_PARALLEL_EXECUTIONS=10

# ----------------------------------------------------------------------------
# FEATURE FLAGS (NEW in v1.1)
# ----------------------------------------------------------------------------

# Enable automatic lead scoring
ENABLE_LEAD_SCORING=true

# Enable phone number normalization
ENABLE_PHONE_NORMALIZATION=true

# Enable client IP tracking
ENABLE_IP_TRACKING=true

# Enable execution performance tracking
ENABLE_PERFORMANCE_TRACKING=true

# ----------------------------------------------------------------------------
# INTEGRATION EXTRAS (Optional)
# ----------------------------------------------------------------------------

# Twilio SMS Configuration (if replacing Slack with SMS)
# TWILIO_CREDENTIAL_ID=10
# TWILIO_FROM_NUMBER=+15551234567
# TWILIO_TO_NUMBER=+15559876543

# SendGrid Email Configuration (if adding email notifications)
# SENDGRID_CREDENTIAL_ID=11
# SENDGRID_FROM_EMAIL=noreply@yourdomain.com
# SENDGRID_TO_EMAIL=team@yourdomain.com

# Redis Cache (for duplicate detection - future enhancement)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
# REDIS_DB=0

# ----------------------------------------------------------------------------
# ENVIRONMENT-SPECIFIC OVERRIDES
# ----------------------------------------------------------------------------

# Environment identifier (development, staging, production)
NODE_ENV=production

# Workflow version (auto-tracked in enhanced version)
WORKFLOW_VERSION=1.1.0-enhanced

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
#
# VALIDATION CHECKLIST:
# [ ] All credential IDs match your n8n instance
# [ ] Webhook URLs tested with curl/Postman
# [ ] CORS origins match your frontend domains
# [ ] Google Sheet exists and is accessible
# [ ] Notification channels exist in Slack/Teams
# [ ] Error notification channel configured separately
# [ ] Support email is valid
# [ ] Timezone is correct for your location
# [ ] Rate limiting configured appropriately
# [ ] Retry counts set based on your reliability requirements
#
# SECURITY CHECKLIST:
# [ ] No credentials hardcoded in workflow JSON
# [ ] .env file added to .gitignore
# [ ] Production ALLOWED_ORIGINS is restrictive (no *)
# [ ] Credentials use OAuth2 where possible (vs API keys)
# [ ] Error messages don't expose sensitive internal details
# [ ] HIPAA_MODE enabled if handling PHI in future modules
#
# For support: support@aigent.company
# Documentation: https://docs.aigent.company/templates/module-01-enhanced
# ============================================================================
