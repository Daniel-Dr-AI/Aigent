# ========================================
# Aigent Module 03 - Telehealth Session
# Environment Variables Configuration
# ========================================

# -----------------
# Webhook Configuration
# -----------------
# Allowed CORS origins (comma-separated or '*' for all)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Unique webhook identifier for telehealth endpoint
WEBHOOK_ID_TELEHEALTH=telehealth-session-v1

# -----------------
# Telehealth Platform Configuration
# -----------------
# Primary platform: Zoom, Doxy.me, Amwell, Microsoft Teams, Google Meet
TELEHEALTH_PROVIDER_NAME=Zoom

# Telehealth API base URL
# Zoom for Healthcare: https://api.zoom.us/v2
# Doxy.me: https://api.doxy.me/api/v1
# Amwell: https://api.amwell.com/v1
TELEHEALTH_API_BASE_URL=https://api.zoom.us/v2

# API credential reference in n8n
TELEHEALTH_CREDENTIAL_ID=20
TELEHEALTH_CREDENTIAL_NAME=Zoom for Healthcare OAuth

# Meeting type (platform-specific)
# Zoom: 1=instant, 2=scheduled, 3=recurring no fixed time, 8=recurring fixed time
# Doxy.me: standard, waiting_room
# Amwell: video, phone
TELEHEALTH_MEETING_TYPE=2

# Default session duration (minutes)
DEFAULT_SESSION_DURATION=30

# Default provider name (if not specified in appointment data)
DEFAULT_PROVIDER_NAME=Dr. Provider

# Provider email for session host link
PROVIDER_EMAIL=provider@yourclinic.com

# -----------------
# Security & Session Settings
# -----------------
# Enable waiting room (patient waits until host admits)
ENABLE_WAITING_ROOM=true

# Enable automatic cloud recording
ENABLE_AUTO_RECORDING=false

# Allow participants to join before host
ALLOW_JOIN_BEFORE_HOST=false

# Require password for session
REQUIRE_SESSION_PASSWORD=true

# Enable end-to-end encryption (where supported)
ENABLE_E2E_ENCRYPTION=true

# Session timeout after scheduled end time (minutes)
SESSION_TIMEOUT_BUFFER=15

# -----------------
# Platform-Specific Settings
# -----------------
# Zoom for Healthcare
ZOOM_ACCOUNT_ID=
ZOOM_BAA_ENABLED=true
ZOOM_ENCRYPTION_TYPE=enhanced_encryption
ZOOM_MUTE_ON_ENTRY=true

# Doxy.me
DOXYEME_CLINIC_NAME=yourclinic
DOXYEME_ROOM_PREFIX=dr
DOXYEME_PIN_REQUIRED=true

# Amwell
AMWELL_PROVIDER_ID=
AMWELL_ORGANIZATION_ID=
AMWELL_VISIT_TYPE=video

# Microsoft Teams (via Graph API)
MS_TEAMS_TENANT_ID=
MS_TEAMS_ORGANIZER_ID=
MS_TEAMS_ALLOW_RECORDING=false

# Google Meet (via Calendar API)
GOOGLE_MEET_CALENDAR_ID=primary
GOOGLE_MEET_ADD_CONFERENCING=true

# -----------------
# CRM Configuration (HubSpot)
# -----------------
# HubSpot credential ID from n8n credential store
HUBSPOT_CREDENTIAL_ID=1
HUBSPOT_CREDENTIAL_NAME=HubSpot Account

# Custom CRM fields for telehealth tracking
CRM_FIELD_TELEHEALTH_STATUS=telehealth_status
CRM_FIELD_SESSION_LINK=telehealth_link
CRM_FIELD_SESSION_ID=telehealth_session_id

# Alternate CRM Examples:
# SALESFORCE_CREDENTIAL_ID=2
# SALESFORCE_CREDENTIAL_NAME=Salesforce Production
# ZOHO_CREDENTIAL_ID=3
# ZOHO_CREDENTIAL_NAME=Zoho CRM

# -----------------
# SMS Notification Configuration (Twilio)
# -----------------
# Twilio credential reference
TWILIO_CREDENTIAL_ID=15
TWILIO_CREDENTIAL_NAME=Twilio Account

# Clinic's Twilio phone number
TWILIO_FROM_NUMBER=+15551234567

# Enable SMS notifications
ENABLE_SMS_NOTIFICATIONS=true

# Send SMS reminder (hours before appointment)
SMS_REMINDER_HOURS_BEFORE=24,1

# -----------------
# Email Notification Configuration (SendGrid)
# -----------------
# SendGrid credential reference
SENDGRID_CREDENTIAL_ID=17
SENDGRID_CREDENTIAL_NAME=SendGrid API

# From email address (must be verified in SendGrid)
SENDGRID_FROM_EMAIL=telehealth@yourclinic.com

# BCC email for internal tracking
SENDGRID_BCC_EMAIL=sessions@yourclinic.com

# Enable email notifications
ENABLE_EMAIL_NOTIFICATIONS=true

# Send email reminder (hours before appointment)
EMAIL_REMINDER_HOURS_BEFORE=24

# Enable provider notifications
ENABLE_PROVIDER_NOTIFICATIONS=true

# -----------------
# Clinic Branding & Information
# -----------------
# Clinic name (appears in messages and emails)
CLINIC_NAME=Your Clinic Name

# Clinic ID for session identification
CLINIC_ID=clinic-001

# Clinic phone number (formatted for display)
CLINIC_PHONE=+1 (555) 123-4567

# Clinic email for patient inquiries
CLINIC_EMAIL=info@yourclinic.com

# Clinic physical address (for reference)
CLINIC_ADDRESS=123 Medical Plaza\nSuite 100\nYour City, ST 12345

# Clinic timezone (IANA format)
CLINIC_TIMEZONE=America/New_York

# Brand primary color (hex code, used in email templates)
BRAND_PRIMARY_COLOR=#4F46E5

# Brand secondary color
BRAND_SECONDARY_COLOR=#10B981

# Clinic logo URL (for email headers)
CLINIC_LOGO_URL=https://yourdomain.com/logo.png

# -----------------
# Data Store Configuration (Google Sheets)
# -----------------
# Google Sheet ID for telehealth session logging
GOOGLE_SHEET_ID=1a2b3c4d5e6f7g8h9i0j

# Sheet tab name for telehealth sessions
GOOGLE_SHEET_TAB_TELEHEALTH=Telehealth Sessions

# Google Sheets OAuth2 credential
GOOGLE_SHEETS_CREDENTIAL_ID=6
GOOGLE_SHEETS_CREDENTIAL_NAME=Google Sheets OAuth

# Alternate Data Store Examples:
# AIRTABLE_CREDENTIAL_ID=7
# AIRTABLE_BASE_ID=appXXXXXXXXXXXXXX
# AIRTABLE_TABLE_NAME=Telehealth Sessions

# POSTGRES_CREDENTIAL_ID=8
# POSTGRES_TABLE=telehealth_sessions

# -----------------
# Business Rules Configuration
# -----------------
# Minimum hours before appointment to create session
MIN_SESSION_CREATE_ADVANCE_HOURS=1

# Maximum hours before appointment to create session
MAX_SESSION_CREATE_ADVANCE_DAYS=7

# Auto-generate session on appointment creation
AUTO_GENERATE_SESSION=true

# Require patient tech check before session
REQUIRE_TECH_CHECK=false

# Tech check URL (if required)
TECH_CHECK_URL=https://yourdomain.com/tech-check

# Enable session pre-join lobby
ENABLE_PRE_JOIN_LOBBY=true

# Session link expiration (hours after scheduled end)
SESSION_LINK_EXPIRATION_HOURS=2

# -----------------
# Integration Settings
# -----------------
# Enable CRM updates
ENABLE_CRM_UPDATE=true

# Enable SMS notifications
ENABLE_SMS_NOTIFICATIONS=true

# Enable email notifications
ENABLE_EMAIL_NOTIFICATIONS=true

# Retry failed API calls
ENABLE_API_RETRY=true

# Number of retry attempts for failed API calls
API_RETRY_ATTEMPTS=3

# Delay between retry attempts (milliseconds)
API_RETRY_DELAY=2000

# -----------------
# Module Integration
# -----------------
# Module 02 webhook URL (for appointment booking)
MODULE_02_WEBHOOK_URL=https://your-n8n.com/webhook/consult-booking

# Module 04 webhook URL (for pre-visit forms)
MODULE_04_WEBHOOK_URL=https://your-n8n.com/webhook/pre-visit-forms

# Module 05 webhook URL (for post-session follow-up)
MODULE_05_WEBHOOK_URL=https://your-n8n.com/webhook/post-session-followup

# -----------------
# Error Handling
# -----------------
# ID of dedicated error handling workflow
ERROR_WORKFLOW_ID=

# Error notification webhook (Slack, Teams, etc.)
ERROR_NOTIFICATION_WEBHOOK=https://hooks.slack.com/services/YOUR/ERROR/WEBHOOK

# Fallback contact method when session creation fails
FALLBACK_CONTACT_PHONE=+15551234567
FALLBACK_CONTACT_EMAIL=support@yourclinic.com

# -----------------
# Compliance & Analytics
# -----------------
# Enable HIPAA-compliant logging
HIPAA_COMPLIANT_LOGGING=true

# Log session access events
LOG_SESSION_ACCESS=true

# Enable session analytics
ENABLE_SESSION_ANALYTICS=true

# Analytics webhook (for session metrics)
ANALYTICS_WEBHOOK_URL=

# Data retention period (days) for session logs
DATA_RETENTION_DAYS=2555

# Enable session quality tracking
ENABLE_QUALITY_TRACKING=false

# Quality tracking webhook (post-session survey)
QUALITY_TRACKING_WEBHOOK=

# -----------------
# n8n Instance Configuration
# -----------------
# Unique instance identifier for multi-tenant setups
N8N_INSTANCE_ID=clinic-prod-001

# -----------------
# Testing & Development
# -----------------
# Enable test mode (prevents actual session creation)
TEST_MODE=false

# Test session URL (used in test mode)
TEST_SESSION_URL=https://test.zoom.us/j/1234567890

# Test session password
TEST_SESSION_PASSWORD=test123

# Override patient email in test mode
TEST_PATIENT_EMAIL_OVERRIDE=

# Override provider email in test mode
TEST_PROVIDER_EMAIL_OVERRIDE=

# -----------------
# Performance & Monitoring
# -----------------
# API timeout (milliseconds)
API_TIMEOUT=15000

# Webhook response timeout (milliseconds)
WEBHOOK_TIMEOUT=20000

# Enable performance logging
ENABLE_PERFORMANCE_LOG=true

# Enable detailed debug logging
DEBUG_MODE=false

# Monitoring webhook (for uptime/health checks)
MONITORING_WEBHOOK_URL=

# Session creation success rate threshold (alert if below)
SUCCESS_RATE_THRESHOLD=95

# -----------------
# Advanced Features
# -----------------
# Enable automated tech check reminder
ENABLE_TECH_CHECK_REMINDER=true

# Tech check reminder time (hours before appointment)
TECH_CHECK_REMINDER_HOURS=2

# Enable session recording consent tracking
ENABLE_RECORDING_CONSENT=true

# Recording consent required before session start
RECORDING_CONSENT_REQUIRED=false

# Enable virtual background requirement
ENABLE_VIRTUAL_BACKGROUND=false

# Virtual background image URL
VIRTUAL_BACKGROUND_URL=

# Enable automated follow-up scheduling
ENABLE_AUTO_FOLLOWUP=false

# Follow-up scheduling delay (days after session)
FOLLOWUP_DELAY_DAYS=3

# Enable interpreter services integration
ENABLE_INTERPRETER_SERVICES=false

# Interpreter service API URL
INTERPRETER_SERVICE_URL=

# -----------------
# Module Metadata
# -----------------
MODULE_VERSION=1.0.0
MODULE_NAME=Telehealth_Session
MODULE_DEPENDENCIES=Aigent_Module_02_Consult_Booking
